---
layout: default
---

{% if page.collection == "projects" %}
  {% assign is_project = true %}
  {% assign slug = page.path | split: "/" | shift | first %}
  {% assign images = site.documents
      | where_exp: "d", "d.path contains slug"
      | where_exp: "d", "d.name"
      | sort: "basename" %}
  {% assign image_exts = ".jpg .png .gif" %}
  {% assign embed_exts = ".html" %}
{% endif %}



<nav id="projects">
  <ul{% if is_project %} class="details"{% endif %}>
    {% for p in site.projects reversed %}
        {% if p.url == page.url %}
          <li class="viewing">
            <h1>{{ page.title }}</h1>
            <p>{{ page.date | date: "%Y" }}</p>
            <p>{{ page.medium }}</p>
            <p>{{ page.dimension | replace: " x ", "&thinsp;&times;&thinsp;" }}</p>
          </li>
        {% else %}
          <li><a href="{{ p.url | replace: "index.html", "" }}">{{ p.title }}</a></li>
        {% endif %}
    {% endfor %}
  </ul>
</nav>

{% if is_project %}

  <div id="gallery"
       data-next="{{ page.previous.url | replace: "index.html", "" }}"
       data-prev="{{ page.next.url | replace: "index.html", "" }}">
    <ul>
      {% for i in images %}
        {% assign details = page.settings[i.name] %}
        {% if details.full %}
          <li class="full"
              style="background-image: url('{{ i.name }}');">
          </li>
        {% else %}
          <li{% if details.clean %} class="clean"{% endif %}>
            {% if image_exts contains i.extname %}
              <img src="{{ i.name }}"/>
            {% elsif embed_exts contains i.extname %}
              {% include_relative {{ i.name }} %}
            {% endif %}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>

  <nav id="details">
    <ul>
      {% for i in images %}
        <li><a href="#{{ i.basename }}">{{ i.basename }}</a></li>
      {% endfor %}
    </ul>
  </nav>

  <script type="text/javascript" src="/assets/js/gallery.js"></script>

{% else %}
  {{ content }}
{% endif %}
